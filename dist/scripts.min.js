"use strict";function themeSwitcher(){function a(){g.classList.add("hide"),f.classList.remove("hide"),i.textContent="off"}function b(){f.classList.add("hide"),g.classList.remove("hide"),i.textContent="on"}const c=`${"TODOS-v2-local"}-switcher`,d=document.getElementById("btn-theme-toggle"),f=document.getElementById("theme-lightmode"),g=document.getElementById("theme-darkmode"),h=document.querySelector("html"),i=document.getElementById("mode");d.addEventListener("click",d=>{d.preventDefault(),h.classList.toggle("light-theme");const e=h.classList.contains("light-theme");d.target.setAttribute("aria-pressed",e+""),e?a():b();const i=f.classList.contains("hide")?"hide":"",j=g.classList.contains("hide")?"hide":"";localStorage.setItem(c,JSON.stringify([e,i,j]))}),function(){const e=JSON.parse(localStorage.getItem(c))||[!1,"",""],f=e[0];f?(h.classList.add("light-theme"),a()):(h.classList.remove("light-theme"),b()),d.setAttribute("aria-pressed",f+"")}()}themeSwitcher();function loadingAnimation(){window.addEventListener("load",()=>{const a=document.getElementById("loader"),b=document.getElementById("page-loaded");a.classList.add("loader-hidden"),a.addEventListener("transitionend",()=>{a.remove(),b.textContent="Page has loaded.",b.setAttribute("aria-hidden","false")})})}loadingAnimation();const deleteAllBtn=document.querySelector("[data-delete-all-todos]");function deleteAllTodos(){deleteAllBtn.addEventListener("click",()=>{if(window.confirm("Do you really want to delete all to-dos?")){["SORTABLE-TODO-LIST_DIST-todos-redo","SORTABLE-TODO-LIST_DIST-sort-dates-enabled","SORTABLE-TODO-LIST_DIST-toolbar-border-state","SORTABLE-TODO-LIST_DIST-list-border-state"].forEach(a=>{for(let b=0;b<localStorage.length;b++){const c=localStorage.key(b);c.startsWith(a)&&localStorage.removeItem(c)}}),window.location.reload()}})}function enableDeleteAllBtn(a){1<a.length&&deleteAllBtn.removeAttribute("disabled")}deleteAllBtn.setAttribute("disabled",""),deleteAllTodos();function toDoList(){function a(a){const c=u.content.cloneNode(!0),d=c.querySelector(".list-item");d.dataset.todoId=a.id;const e=c.querySelector("[data-list-item-text]");if(e.innerText=a.name,a.date){const d=c.querySelector("[data-list-item-day]");b(a,d);const e=c.querySelector("[data-list-item-date]"),f=a.date.split("/"),g=new Date(`${f[1]}/${f[0]}/${f[2]}`);e.textContent=g.toLocaleDateString("en-GB")}const f=c.querySelector("[data-button-complete]");f.innerText=a.complete?"Uncomplete":"Complete",d.classList.toggle("complete",a.complete),i(),enableDeleteAllBtn(w),t.appendChild(c)}function b(a,b){switch(a.day){case 0:b.innerHTML="Sun<span class='visually-hidden'>day</span>";break;case 1:b.innerHTML="Mon<span class='visually-hidden'>day</span>";break;case 2:b.innerHTML="Tue<span class='visually-hidden'>sday</span>";break;case 3:b.innerHTML="Wed<span class='visually-hidden'>nesday</span>";break;case 4:b.innerHTML="Thu<span class='visually-hidden'>rsday</span>";break;case 5:b.innerHTML="Fri<span class='visually-hidden'>day</span>";break;case 6:b.innerHTML="Sat<span class='visually-hidden'>urday</span>";break;default:console.error("Something's gone wrong, please try again later.");}}function c(){localStorage.setItem(k,JSON.stringify(w))}function d(a){localStorage.setItem(n,JSON.stringify(a))}function e(){const a=localStorage.getItem(n);return JSON.parse(a)||!1}function f(a){localStorage.setItem(m,JSON.stringify(a))}function g(){const a=localStorage.getItem(m);return JSON.parse(a)||!1}function h(){c(),t.innerHTML="",w.forEach(b=>a(b))}function i(){2<=w.length?(v.removeAttribute("disabled"),localStorage.setItem(l,"true")):(v.setAttribute("disabled",""),localStorage.setItem(l,"false"))}function j(a){const b=a.split("/"),c=b.reverse(),d=c.join("/");return new Date(d)}const k=`${"SORTABLE-TODO-LIST_DIST"}-todos-redo`,l=`${"SORTABLE-TODO-LIST_DIST"}-sort-dates-enabled`,m=`${"SORTABLE-TODO-LIST_DIST"}-toolbar-border-state`,n=`${"SORTABLE-TODO-LIST_DIST"}-list-border-state`,o=document.querySelector("#new-todo-form"),p=document.getElementById("reset"),q=document.querySelector("[data-input-text]"),r=document.querySelector("[data-input-date]"),s=document.getElementById("toolbar"),t=document.getElementById("list"),u=document.querySelector("#list-item-template"),v=document.querySelector("[data-sort-button]");v.setAttribute("disabled","");let w=function(){const a=localStorage.getItem(k);return JSON.parse(a)||[]}();w.forEach(b=>a(b)),o.addEventListener("submit",b=>{b.preventDefault();const e=q.value,g=r.value,h=new Date(g),i=h.getDay(),j=r.value,k=j.split("-"),l=k.reverse().join("/");if(""===e)return;const m={day:i,date:l,name:e,complete:!1,edited:!1,id:new Date().valueOf().toString()};w.push(m),a(m),c(),r.value="",q.value="",q.setAttribute("placeholder","Add a task...");const n=document.querySelectorAll(".list-item"),o=0<n.length;t.classList.toggle("js-visibility",o),d(o);const p=1<n.length;s.classList.toggle("js-visibility",p),f(p)}),t.addEventListener("click",a=>{if(!a.target.matches("[data-button-edit]"))return;a.target.innerText="Edit"===a.target.innerText?"Save edit":"Edit";const b=a.target.closest(".list-item"),d=b.querySelector("[data-list-item-text]");d.toggleAttribute("contenteditable");const e=b.dataset.todoId,f=w.find(a=>a.id===e);f.edited=!d.hasAttribute("contenteditable"),f.edited&&(f.name=d.innerText),c()}),t.addEventListener("click",a=>{if(!a.target.matches("[data-button-complete]"))return;a.target.innerText="Complete"===a.target.innerText?"Uncomplete":"Complete";const b=a.target.closest(".list-item");b.classList.toggle("complete");const d=b.dataset.todoId,e=w.find(a=>a.id===d);e.complete=b.classList.contains("complete"),c()}),t.addEventListener("click",a=>{if(!a.target.matches("[data-button-delete]"))return;const b=a.target.closest(".list-item");b.remove();const e=b.dataset.todoId;w=w.filter(a=>a.id!==e),c();const g=document.querySelectorAll(".list-item");2>g.length&&(deleteAllBtn.setAttribute("disabled",""),v.setAttribute("disabled",""));const h=0<g.length;t.classList.toggle("js-visibility",h),d(h);const i=1<g.length;s.classList.toggle("js-visibility",i),f(i)}),document.addEventListener("DOMContentLoaded",()=>{const a=e();t.classList.toggle("js-visibility",a);const b=g();s.classList.toggle("js-visibility",b)}),v.addEventListener("click",()=>{w.sort((c,a)=>j(c.date)-j(a.date)),h()}),p.addEventListener("click",a=>{a.preventDefault(),r.value="",q.value=""})}toDoList();