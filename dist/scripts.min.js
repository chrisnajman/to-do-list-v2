"use strict";function themeSwitcher(){function a(){g.classList.add("hide"),f.classList.remove("hide"),i.textContent="off"}function b(){f.classList.add("hide"),g.classList.remove("hide"),i.textContent="on"}const c=`${"TODOS-v2-local"}-switcher`,d=document.getElementById("btn-theme-toggle"),f=document.getElementById("theme-lightmode"),g=document.getElementById("theme-darkmode"),h=document.querySelector("html"),i=document.getElementById("mode");d.addEventListener("click",d=>{d.preventDefault(),h.classList.toggle("light-theme");const e=h.classList.contains("light-theme");d.target.setAttribute("aria-pressed",e+""),e?a():b();const i=f.classList.contains("hide")?"hide":"",j=g.classList.contains("hide")?"hide":"";localStorage.setItem(c,JSON.stringify([e,i,j]))}),function(){const e=JSON.parse(localStorage.getItem(c))||[!1,"",""],f=e[0];f?(h.classList.add("light-theme"),a()):(h.classList.remove("light-theme"),b()),d.setAttribute("aria-pressed",f+"")}()}themeSwitcher();function loadingAnimation(){window.addEventListener("load",()=>{const a=document.getElementById("loader"),b=document.getElementById("page-loaded");a.classList.add("loader-hidden"),a.addEventListener("transitionend",()=>{a.remove(),b.textContent="Page has loaded.",b.setAttribute("aria-hidden","false")})})}loadingAnimation();const deleteAllBtn=document.querySelector("[data-delete-all-todos]");function deleteAllTodos(){deleteAllBtn.addEventListener("click",()=>{if(window.confirm("Do you really want to delete all to-dos?")){["SORTABLE-TODO-LIST-v2-local-todos-redo","SORTABLE-TODO-LIST-v2-local-sort-dates-enabled"].forEach(a=>{for(let b=0;b<localStorage.length;b++){const c=localStorage.key(b);c.startsWith(a)&&localStorage.removeItem(c)}}),window.location.reload()}})}function enableDeleteAllBtn(a){1<a.length&&deleteAllBtn.removeAttribute("disabled")}deleteAllBtn.setAttribute("disabled",""),deleteAllTodos();function toDoList(){function a(a){const b=m.content.cloneNode(!0),c=b.querySelector(".list-item");c.dataset.todoId=a.id;const e=b.querySelector("[data-list-item-text]");if(e.innerText=a.name,a.date){const c=b.querySelector("[data-list-item-date]"),d=a.date.split("/"),e=new Date(`${d[1]}/${d[0]}/${d[2]}`);c.textContent=e.toLocaleDateString("en-GB")}const f=b.querySelector("[data-button-complete]");f.innerText=a.complete?"Uncomplete":"Complete",c.classList.toggle("complete",a.complete),d(),enableDeleteAllBtn(o),l.appendChild(b)}function b(){localStorage.setItem(f,JSON.stringify(o))}function c(){b(),l.innerHTML="",o.forEach(b=>a(b))}function d(){2<=o.length?(n.removeAttribute("disabled"),localStorage.setItem(g,"true")):(n.setAttribute("disabled",""),localStorage.setItem(g,"false"))}function e(a){const b=a.split("/"),c=b.reverse(),d=c.join("/");return new Date(d)}const f=`${"SORTABLE-TODO-LIST-v2-local"}-todos-redo`,g=`${"SORTABLE-TODO-LIST-v2-local"}-sort-dates-enabled`,h=document.querySelector("#new-todo-form"),i=document.getElementById("reset"),j=document.querySelector("[data-input-text]"),k=document.querySelector("[data-input-date]"),l=document.getElementById("list"),m=document.querySelector("#list-item-template"),n=document.querySelector("[data-sort-button]");n.setAttribute("disabled","");let o=function(){const a=localStorage.getItem(f);return JSON.parse(a)||[]}();o.forEach(b=>a(b)),h.addEventListener("submit",c=>{c.preventDefault();const d=j.value,e=k.value,f=e.split("-"),g=f.reverse().join("/");if(""!==d){const c={date:g,name:d,complete:!1,edited:!1,id:new Date().valueOf().toString()};o.push(c),a(c),b(),k.value="",j.value="",j.setAttribute("placeholder","Add a task...")}}),l.addEventListener("click",a=>{if(!a.target.matches("[data-button-edit]"))return;a.target.innerText="Edit"===a.target.innerText?"Save edit":"Edit";const c=a.target.closest(".list-item"),d=c.querySelector("[data-list-item-text]");d.toggleAttribute("contenteditable");const e=c.dataset.todoId,f=o.find(a=>a.id===e);f.edited=!d.hasAttribute("contenteditable"),f.edited&&(f.name=d.innerText),b()}),l.addEventListener("click",a=>{if(!a.target.matches("[data-button-complete]"))return;a.target.innerText="Complete"===a.target.innerText?"Uncomplete":"Complete";const c=a.target.closest(".list-item");c.classList.toggle("complete");const d=c.dataset.todoId,e=o.find(a=>a.id===d);e.complete=c.classList.contains("complete"),b()}),l.addEventListener("click",a=>{if(!a.target.matches("[data-button-delete]"))return;const c=a.target.closest(".list-item");c.remove();const d=c.dataset.todoId;o=o.filter(a=>a.id!==d),b()}),n.addEventListener("click",()=>{o.sort((c,a)=>e(c.date)-e(a.date)),c()}),i.addEventListener("click",a=>{a.preventDefault(),k.value="",j.value=""})}toDoList();